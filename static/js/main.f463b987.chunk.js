(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,t,r){e.exports=r(18)},,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var a=r(0),i=r.n(a),n=r(2),c=r.n(n),s=r(3),u=r(4),o=r(6),l=r(5),h=r(7);var v=function(e){function t(e,t,r){var a={};return a.gridColumn=t+"/"+(t+1),a.gridRow=e+"/"+(e+1),a.backgroundColor=r,a.borderStyle="solid",a.borderWidth="6px",a.borderColor="black",a}var r=e.board.map(function(e,r){return e.map(function(e,a){return e?i.a.createElement("div",{style:t(r+1,a+1,"red"),key:10*r+a}):i.a.createElement("div",{style:t(r+1,a+1,"blue"),key:10*r+a})})});return i.a.createElement("div",{className:"container",style:{display:"grid",gridTemplateColumns:"repeat(10,48px)",gridTemplateRows:"repeat(20,48px)"}},r)},f={I:[[1,1,1,1]],L:[[1,0,0],[1,1,1]],J:[[0,0,1],[1,1,1]],Z:[[1,1,0],[0,1,1]],S:[[0,1,1],[1,1,0]],O:[[1,1],[1,1]],T:[[0,1,0],[1,1,1]]},d=["I","L","J","Z","S","O","T"];r(14);var p=function(e){function t(e,t,r){var a={};return a.gridColumn=t+"/"+(t+1),a.gridRow=e+"/"+(e+1),a.backgroundColor=r,a.borderStyle="solid",a.borderWidth="8px",a}var r=e.piece.map(function(e,r){return e.map(function(e,a){return e?i.a.createElement("div",{style:t(r+1,a+1,"red"),key:10*r+a}):i.a.createElement("div",{style:t(r+1,a+1,"black"),key:10*r+a})})});return i.a.createElement("div",{className:"border"},i.a.createElement("h1",{className:"score"},"Next"),i.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(4,48px)",gridTemplateRows:"repeat(2,48px)"}},r))};r(15);var g=function(e){return i.a.createElement("div",{className:"border"},i.a.createElement("h1",{className:"score"},"Score"),i.a.createElement("h1",{className:"score"},e.score))};function m(e){return i.a.createElement("div",{className:"border"},i.a.createElement("h1",{className:"score"},"Level"),i.a.createElement("h1",{className:"score"},"1"))}r(16),r(17);function y(){var e=Math.floor(7*Math.random());return f[d[e]]}var k=function(e){function t(e){var r;Object(s.a)(this,t),r=Object(o.a)(this,Object(l.a)(t).call(this,e));for(var a=[],i=0;i<20;i++)a.push(Array(10).fill(0));return r.state={boardMap:a,nextPiece:{piece:y()},currentPiece:{piece:y()},current_i:0,current_j:0,timer:500,score:0,timerId:0},r}return Object(h.a)(t,e),Object(u.a)(t,[{key:"getSignificantPiece",value:function(){for(var e=this.state.currentPiece.piece,t=[],r=0;r<e[0].length;r++)for(var a=e.length-1;a>=0;a--)if(e[a][r]){t.push(a);break}return t}},{key:"getLeftSignificationPiece",value:function(){for(var e=this.state.currentPiece.piece,t=[],r=0;r<e.length;r++)for(var a=0;a<e[0].length;a++)if(e[r][a]){t.push(a);break}return t}},{key:"getRightSignificantPiece",value:function(){for(var e=this.state.currentPiece.piece,t=[],r=0;r<e.length;r++)for(var a=e[0].length-1;a>=0;a--)if(e[r][a]){t.push(a);break}return t}},{key:"isInRange",value:function(e,t){return e>-1&&e<20&&t>-1&&t<10}},{key:"getCurrentBoard",value:function(){for(var e=this.state.currentPiece.piece,t=this.state.boardMap,r=this.state.current_i,a=this.state.current_j,i=[],n=0;n<t.length;n++)i.push(t[n].slice());for(var c=0;c<e.length;c++)for(var s=0;s<e[c].length;s++)e[c][s]&&c+r<20&&s+a<10&&(i[c+r][s+a]=e[c][s]);return i}},{key:"collisionOccured",value:function(){var e=this.state.currentPiece.piece,t=this.getCurrentBoard(),r=this.getSignificantPiece(),a=this.state.current_i,i=this.state.current_j;if(this.isInRange(a+e.length,i)){for(var n=0;n<r.length;n++)if(t[a+r[n]][i+n]&&t[a+r[n]+1][i+n])return!0;return!1}return!0}},{key:"rotateCurrentPiece",value:function(){for(var e=this.state.currentPiece.piece,t=e[0].length,r=e.length,a={piece:[]},i=0;i<t;i++)a.piece.push(Array(r).fill(0));for(var n=0;n<r;n++)for(var c=0;c<t;c++)a.piece[t-c-1][n]=e[n][c];this.setState({currentPiece:a})}},{key:"rightBoundaryReached",value:function(){var e=this.state.currentPiece.piece,t=this.getCurrentBoard(),r=this.getRightSignificantPiece(),a=this.state.current_i,i=this.state.current_j;if(i+e[0].length>=10)return!0;for(var n=0;n<r.length;n++)if(t[a+n][i+r[n]]&&t[a+n][i+r[n]+1])return!0;return!1}},{key:"leftBoundaryReached",value:function(){var e=this.getCurrentBoard(),t=this.getLeftSignificationPiece(),r=this.state.current_i,a=this.state.current_j;if(a-1<0)return!0;for(var i=0;i<t.length;i++)if(e[r+i][a+t[i]]&&e[r+i][a+t[i]-1])return!0;return!1}},{key:"renderPiece",value:function(){var e=this.getCurrentBoard();this.setState({boardMap:e})}},{key:"cleanUpMap",value:function(){for(var e=this.state.boardMap,t=[],r=0;r<e.length;r++)e[r].reduce(function(e,t){return e+t})===e[r].length&&t.push(r);if(0!==t.length){for(var a=Math.min.apply(Math,t),i=Math.max.apply(Math,t),n=[],c=0;c<20;c++)n.push(Array(10).fill(0));for(var s=19;s>i;s--)n[s]=e[s].slice();for(var u=0;u<a;u++)n[u+i-a+1]=e[u].slice();var o=this.state.score+100*(i-a+1);this.setState({boardMap:n,score:o})}}},{key:"updatePosition",value:function(){var e=this.state.current_i,t=this.state.current_j;if(this.collisionOccured()){this.renderPiece(),this.cleanUpMap();var r={};r.piece=this.state.nextPiece.piece;var a={};a.piece=y(),this.setState({current_i:0,current_j:0,currentPiece:r,nextPiece:a})}else e+=1,this.setState({current_i:e,current_j:t})}},{key:"registerMoveUp",value:function(){this.state.current_j+this.state.currentPiece.piece.length<10&&this.rotateCurrentPiece()}},{key:"registerMoveLeft",value:function(){var e=this.state.current_j;this.leftBoundaryReached()||(e-=1,this.setState({current_j:e}))}},{key:"registerMoveRight",value:function(){var e=this.state.current_j;this.rightBoundaryReached()||(e+=1,this.setState({current_j:e}))}},{key:"registerMoveDown",value:function(){var e=this.state.current_i;if(!this.collisionOccured()){var t=e+1;this.setState({current_i:t})}}},{key:"registerMove",value:function(e){switch(e.key){case"ArrowRight":this.registerMoveRight();break;case"ArrowLeft":this.registerMoveLeft();break;case"ArrowUp":this.registerMoveUp();break;case"ArrowDown":this.registerMoveDown();break;case"p":clearInterval(this.state.timerId);break;case"r":this.run()}}},{key:"run",value:function(){var e=this,t=setInterval(function(){return e.updatePosition()},this.state.timer);this.setState({timerId:t})}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.registerMove.bind(this)),this.run()}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"item0"},i.a.createElement("h1",{className:"score"},"Tetris")),i.a.createElement("div",{className:"item1"},i.a.createElement(v,{board:this.getCurrentBoard(),piece:this.state.currentPiece.piece,currentI:this.state.current_i,currentJ:this.state.current_j})),i.a.createElement("div",{className:"item2"},i.a.createElement(g,{score:this.state.score}),i.a.createElement(p,{piece:this.state.nextPiece.piece}),i.a.createElement(m,null))))}}]),t}(i.a.Component);c.a.render(i.a.createElement(k,null),document.getElementById("root"))}],[[8,1,2]]]);
//# sourceMappingURL=main.f463b987.chunk.js.map